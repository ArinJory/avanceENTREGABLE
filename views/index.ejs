<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Productos de Maquillaje</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <div class="container py-4">
    <h1 class="mb-4">Productos de Maquillaje</h1>

    <div class="mb-3">
      <a href="/add" class="btn btn-success add">Agregar producto</a>
      <a href="/?orden=asc" class="btn btn-primary">Ordenar por precio (menor a mayor)</a>
      <a href="/?orden=desc" class="btn btn-warning text-white">Ordenar por precio (mayor a menor)</a>
    </div>

    <div class="row">
      <% productos.forEach(producto => { %>
        <div class="col-md-4 mb-4">
          <div class="card h-100">
            <img src="/img/<%= producto.imagen %>" class="card-img-top" alt="<%= producto.nombre %>" style="max-height: 300px; object-fit: cover;">
            <div class="card-body">
              <h5 class="card-title"><%= producto.nombre %></h5>
              <p class="card-text"><%= producto.descripcion %></p>
              <p><strong>Precio:</strong> S/ <%= producto.precio %></p>
              <p><strong>Stock:</strong> <%= producto.stock %></p>
              <div class="d-flex justify-content-center gap-2 mt-3">
                <a href="/editar/<%= producto.id %>" class="btn btn-warning edit">Editar</a>
                <form action="/eliminar/<%= producto.id %>" method="POST">
                  <a href="/eliminar/<%= producto.id %>" class="btn btn-danger delete">Eliminar</a>
                  

                </form>
              </div>
              
              <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const enlacesEliminar = document.querySelectorAll(".delete");
  const enlacesEditar = document.querySelectorAll(".edit");

  enlacesEliminar.forEach(enlace => {
    enlace.addEventListener("click", (event) => {
      event.preventDefault();
      Swal.fire({
        title: '¿Estás seguro?',
        text: 'Esta acción eliminará el producto.',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#d33',
        cancelButtonColor: '#3085d6',
        confirmButtonText: 'Sí, eliminar',
        cancelButtonText: 'Cancelar'
      }).then((result) => {
        if (result.isConfirmed) {
          window.location.href = event.target.getAttribute("href");
        }
      });
    });
  });
  enlacesEditar.forEach(enlace => {
    enlace.addEventListener("click", (event) => {
      event.preventDefault();
      Swal.fire({
        title: '¿Deseas editar este producto?',
        text: 'Serás redirigido al formulario de edición.',
        icon: 'info',
        showCancelButton: true,
        confirmButtonColor: '#28a745',
        cancelButtonColor: '#6c757d',
        confirmButtonText: 'Editar',
        cancelButtonText: 'Cancelar'
      }).then((result) => {
        if (result.isConfirmed) {
          window.location.href = event.target.getAttribute("href");
        }
      });
    });
  });
});
</script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const enlacesEliminar = document.querySelectorAll(".delete");
  const enlacesEditar = document.querySelectorAll(".edit");
  const enlaceAgregar = document.querySelector(".add");

  // Confirmación para eliminar
  enlacesEliminar.forEach(enlace => {
    enlace.addEventListener("click", (event) => {
      event.preventDefault();
      Swal.fire({
        title: '¿Estás seguro?',
        text: 'Esta acción eliminará el producto.',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#d33',
        cancelButtonColor: '#3085d6',
        confirmButtonText: 'Sí, eliminar',
        cancelButtonText: 'Cancelar'
      }).then((result) => {
        if (result.isConfirmed) {
          window.location.href = event.target.getAttribute("href");
        }
      });
    });
  });

  enlacesEditar.forEach(enlace => {
    enlace.addEventListener("click", (event) => {
      event.preventDefault();
      Swal.fire({
        title: '¿Deseas editar este producto?',
        text: 'Serás redirigido al formulario de edición.',
        icon: 'info',
        showCancelButton: true,
        confirmButtonColor: '#28a745',
        cancelButtonColor: '#6c757d',
        confirmButtonText: 'Editar',
        cancelButtonText: 'Cancelar'
      }).then((result) => {
        if (result.isConfirmed) {
          window.location.href = event.target.getAttribute("href");
        }
      });
    });
  });

  if (enlaceAgregar) {
    enlaceAgregar.addEventListener("click", (event) => {
      event.preventDefault();
      Swal.fire({
        title: 'Agregar nuevo producto',
        text: '¿Deseas ir al formulario de registro?',
        icon: 'question',
        showCancelButton: true,
        confirmButtonColor: '#17a2b8',
        cancelButtonColor: '#6c757d',
        confirmButtonText: 'Ir',
        cancelButtonText: 'Cancelar'
      }).then((result) => {
        if (result.isConfirmed) {
          window.location.href = enlaceAgregar.getAttribute("href");
        }
      });
    });
  }
});
</script>


            </div>
          </div>
        </div>
      <% }) %>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

